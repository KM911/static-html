---
title: 设计模式
mathjax: false
date: 2023-03-19 09:56:57
tags:
categories:
---



## 七大设计原则

七大设计原则（SOLID原则）是面向对象设计中的一组指导性原则，这些原则旨在帮助我们编写易于维护、可扩展和可重用的代码。这些原则包括：

```
单一职责原则（Single Responsibility Principle，SRP）：一个类只负责单一的职责。

开放封闭原则（Open-Closed Principle，OCP）：一个软件实体应该是开放扩展的，但是关闭修改的。

里式替换原则（Liskov Substitution Principle，LSP）：子类应该能够替换掉它们的基类（父类）。

接口隔离原则（Interface Segregation Principle，ISP）：客户端不应该依赖于它不需要使用的接口。

依赖倒置原则（Dependency Inversion Principle，DIP）：高层模块不应该依赖于低层模块，它们都应该依赖于抽象。这里其实不是很理解

迪米特法则（Law of Demeter，LoD）：一个对象应该对其他对象有尽可能少的了解。

组合/聚合复用原则（Composition/Aggregation Reuse Principle，CARP）：优先使用组合（has-a）或聚合（contains-a）关系，而不是继承关系来实现代码复用。
```

我们的设计模式就是基于这些原则的实践.

### 开放封闭原则

其实就是利用指向基类的指针去求解就号了



### 里氏替换原则 LSP

我们运行子类有自己新的特性,并且完全兼容父类.



1. 只能重写抽象方法
2. 是否可以改变非抽象方法的实现细节呢?
3. 父类可以被子类代替 任何基类出现的地方,子类一定可以代替
4. 抽象方法的返回值范围只能缩小 不能放大

#### 案例

写一个发送http请求的工具,具有可移植性.





##  设计模式

前人的经验.

* 创建型模式 如果创建对象 
* 结构型模式 如何将对象组合到一起
* 行为型模式 对象如何信息交互 如果共同完成任务





## 创建型模式



### 单例模式

一个类只能有一个对象/实例.

这里不是说你只在你的程序中只进行一次 new的操作导致只有一个对象,而是通过将对象本身设置为类的属性,强制保证了对象的唯一性.

#### 实现方式

* 饿汉式

1. 构造函数为private
2. 自己的实例作为自己的属性 static
3. 返回自己实例的方法 static

```java
class Book{
    // 构造函数为private后 就无法通过new去创建对象
    private Book(){}
    private static Book instance = new Book();
    // 我们现在只能通过getInstance这个静态方法获取该对象
    public  static Book getInstance(){
        return instance;
    }
}
```

* 懒汉式 

```java
class Bank{
    private Bank(){}
    private static Bank instance = null;
    public static  Bank getInstance(){
        if (instance == null){
            return instance = new Bank();
        }
        return  instance;
    }
}

```

#### 对比分析

* 饿汉式在类被加载时就创建了对象,懒汉式只有调用getInstance方法才会创建.前者会占据内存更多的时间,但是它是并发安全的(你就不该在一个并发的程序里写创建对象这种事情) 
* 其实差别不是很大







### 工厂模式

工厂模式有三个细分的: 简单工厂模式  抽象工厂模式                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           

# 抽象模板

额,这里其实就是创建一个虚基类,然后继承,重写,指向之类对象的父类指针

因为java中并没有template这样的关键字,我就认为他是在利用抽象类,其实也不对,只是实现方式不太一样.

这里我只先给出一个抽象类继承的例子.

这里的例子中,我们创建了一个虚基类`PayMent`,并继承它创建了一个`Alipay`,我们也可以创建`wechatpay`,我们可以将注意力放到就是具体的支付流程实现上,而不是每一个都需要去重写一次流程,当然了这里其实应该利用基类指针的.

```java
public class abstracttest {
    public static void main(String[] args) {
        Alipay pay = new Alipay();
        pay.PayAction(100);

    }
}
abstract class PayMent{
     public int money;
     public abstract void   CheckMoney();
     public abstract void  Pay(int price);
     public abstract void SaveMoney();

     public void PayAction(int price){
         this.CheckMoney();
         this.Pay(price);
         this.SaveMoney();
     }
}
class Alipay extends PayMent{
    public void CheckMoney(){
        System.out.println("查询支付宝账户余额 访问支付宝的api");
        this.money = 1000;
    }

    public void Pay(int price){
        System.out.println("支付中");
        this.money = this.money - price;
    }
    public void SaveMoney(){
        System.out.println("账户剩余金额为"+this.money);
    }
}
```
